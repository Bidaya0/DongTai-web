{"version":3,"sources":["webpack:///./src/views/setting/AgentManage.vue?16a3","webpack:///./src/views/setting/AgentManage.vue?d7c8","webpack:///./src/views/setting/AgentManage.vue?0bcf","webpack:///./src/views/setting/AgentManage.vue","webpack:///./src/views/setting/AgentManage.vue?7193"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","tableData","$t","scopedSlots","_u","key","fn","scope","_v","_s","_f","row","latest_time","ref","on","$event","agentInstall","id","agentUninstall","doDelete","staticStyle","total","page","pageSize","currentChange","deleteDialogOpen","slot","agentDelete","staticRenderFns","currentPageSize","currentPageDelete","deleteSelectId","getTableData","val","parseInt","params","loadingStart","services","setting","agentList","status","msg","data","loadingDone","$message","error","length","alltotal","console","log","VueBase","name","filters","formatTimestamp","date","component"],"mappings":"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","file":"js/chunk-4648357e.b1c75402.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-warp\"},[_c('el-table',{staticClass:\"agentManageTable\",attrs:{\"data\":_vm.tableData,\"header-align\":\"center\"}},[_c('el-table-column',{attrs:{\"label\":\"Agent\",\"prop\":\"token\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.address'),\"prop\":\"server\",\"min-width\":\"50px\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.payload'),\"prop\":\"system_load\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.status'),\"prop\":\"running_status\",\"width\":\"90px\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.owner'),\"prop\":\"owner\",\"width\":\"120px\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.timestapm')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm._f(\"formatTimestamp\")(scope.row.latest_time))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.manage'),\"width\":\"100px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('i',{staticClass:\"iconfont iconshengji install\",on:{\"click\":function($event){return _vm.agentInstall(row.id)}}}),_c('i',{staticClass:\"iconfont iconshanchu-4 uninstall\",on:{\"click\":function($event){return _vm.agentUninstall(row.id)}}}),_c('i',{staticClass:\"iconfont iconshanchu-4 uninstall\",on:{\"click\":function($event){return _vm.doDelete(row.id)}}})]}}])})],1),_c('el-pagination',{staticStyle:{\"float\":\"right\"},attrs:{\"total\":_vm.total,\"current-page\":_vm.page,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next, jumper\"},on:{\"current-change\":_vm.currentChange}}),_c('el-dialog',{attrs:{\"visible\":_vm.deleteDialogOpen,\"title\":\"删除引擎\",\"width\":\"25%\"},on:{\"update:visible\":function($event){_vm.deleteDialogOpen=$event}}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',{staticStyle:{\"color\":\"#959fb4\"}},[_vm._v(\"引擎删除后，相关的数据将一并删除，不可恢复\")]),_c('p',{staticStyle:{\"color\":\"#959fb4\",\"margin-top\":\"14px\"}},[_vm._v(\"请确认是否删除？\")])]),_c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"confirmDel\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.agentDelete}},[_vm._v(\" 确认删除 \")]),_c('el-button',{staticClass:\"cancelDel\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.deleteDialogOpen = false}}},[_vm._v(\" 取消 \")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport VueBase from '@/VueBase'\nimport { Component } from 'vue-property-decorator'\nimport { AgentListObj } from '@/views/setting/types'\nimport { formatTimestamp } from '@/utils/utils'\n\n@Component({\n  name: 'AgentManage',\n  filters: {\n    formatTimestamp(date: number | any) {\n      return formatTimestamp(date)\n    },\n  },\n})\nexport default class AgentManage extends VueBase {\n  private tableData: Array<AgentListObj> = []\n  private total = 0\n  private page = 1\n  private pageSize = 10\n  private currentPageSize = 0\n  private currentPageDelete = 0\n  private deleteDialogOpen = false\n  private deleteSelectId = 0\n\n  created() {\n    this.getTableData()\n  }\n\n  private currentChange(val: number | string) {\n    this.page = parseInt(`${val}`)\n    this.getTableData()\n  }\n\n  private async getTableData() {\n    const params = {\n      page: this.page,\n      pageSize: this.pageSize,\n    }\n    this.loadingStart()\n    const { status, msg, data, page } = await this.services.setting.agentList(\n      params\n    )\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    this.tableData = data\n    this.currentPageSize = data.length\n    this.total = page.alltotal\n    this.currentPageDelete = 0\n    console.log(this.currentPageSize)\n  }\n\n  private async agentInstall(id: string | number) {\n    this.loadingStart()\n    const { status, msg } = await this.services.setting.agentInstall({\n      id: parseInt(`${id}`),\n    })\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    await this.getTableData()\n  }\n\n  private async agentUninstall(id: string | number) {\n    this.loadingStart()\n    const { status, msg } = await this.services.setting.agentUninstall({\n      id: parseInt(`${id}`),\n    })\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    await this.getTableData()\n  }\n\n  private async doDelete(id: string | number) {\n    this.deleteDialogOpen = true\n    this.deleteSelectId = parseInt(`${id}`)\n  }\n\n  private async agentDelete() {\n    this.deleteDialogOpen = false\n    this.loadingStart()\n    const { status, msg } = await this.services.setting.agentDelete({\n      id: this.deleteSelectId,\n    })\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    this.currentPageDelete = this.currentPageDelete + 1\n    if (this.currentPageDelete === this.currentPageSize) {\n      this.page = this.page - 1\n    }\n    await this.getTableData()\n    this.deleteSelectId = 0\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentManage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentManage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AgentManage.vue?vue&type=template&id=bad67ba8&scoped=true&\"\nimport script from \"./AgentManage.vue?vue&type=script&lang=ts&\"\nexport * from \"./AgentManage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AgentManage.vue?vue&type=style&index=0&id=bad67ba8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bad67ba8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentManage.vue?vue&type=style&index=0&id=bad67ba8&scoped=true&lang=scss&\""],"sourceRoot":""}