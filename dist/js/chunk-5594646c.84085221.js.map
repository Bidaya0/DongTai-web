{"version":3,"sources":["webpack:///./src/views/setting/AgentManage.vue?8649","webpack:///./src/views/setting/AgentManage.vue?d7c8","webpack:///./src/views/setting/AgentManage.vue?0bcf","webpack:///./src/views/setting/AgentManage.vue","webpack:///./src/views/setting/AgentManage.vue?18f4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","tableData","$t","scopedSlots","_u","key","fn","ref","row","project_name","_v","_s","server","system_load","running_status","scope","_f","latest_time","on","$event","agentInstall","id","agentUninstall","doDelete","token","staticStyle","total","page","pageSize","currentChange","deleteDialogOpen","slot","agentDelete","staticRenderFns","currentPageSize","currentPageDelete","deleteSelectId","getTableData","val","parseInt","params","loadingStart","services","setting","agentList","status","msg","data","loadingDone","$message","error","length","alltotal","console","log","VueBase","name","filters","formatTimestamp","date","component"],"mappings":"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","file":"js/chunk-5594646c.84085221.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-warp\"},[_c('el-table',{staticClass:\"agentManageTable\",attrs:{\"data\":_vm.tableData,\"header-align\":\"center\"}},[_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.projectName'),\"prop\":\"project_name\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"dot\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":row.project_name,\"placement\":\"top-start\"}},[_c('span',[_vm._v(_vm._s(row.project_name))])])],1)]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.address'),\"prop\":\"server\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"dot\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":row.server,\"placement\":\"top-start\"}},[_c('span',[_vm._v(_vm._s(row.server))])])],1)]}}])}),_c('el-table-column',{attrs:{\"width\":\"400\",\"label\":_vm.$t('views.agentManage.payload'),\"prop\":\"system_load\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"dot\"},[_vm._v(\" \"+_vm._s(row.system_load)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.status'),\"prop\":\"running_status\",\"width\":\"90px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_vm._v(\" \"+_vm._s(row.running_status)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"width\":\"160px\",\"label\":_vm.$t('views.agentManage.timestapm')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm._f(\"formatTimestamp\")(scope.row.latest_time))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.owner'),\"prop\":\"owner\",\"width\":\"120px\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$t('views.agentManage.manage'),\"width\":\"140px\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"icon-box\"},[(row.running_status == '未运行')?_c('i',{staticClass:\"icon el-icon-video-play\",on:{\"click\":function($event){return _vm.agentInstall(row.id)}}}):_c('i',{staticClass:\"icon el-icon-video-pause\",on:{\"click\":function($event){return _vm.agentUninstall(row.id)}}}),_c('i',{staticClass:\"icon el-icon-delete\",on:{\"click\":function($event){return _vm.doDelete(row.id)}}})])]}}])}),_c('el-table-column',{attrs:{\"label\":\"Agent\",\"width\":\"320\",\"prop\":\"token\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"dot\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":row.token,\"placement\":\"top-start\"}},[_c('span',[_vm._v(_vm._s(row.token))])])],1)]}}])})],1),_c('el-pagination',{staticStyle:{\"float\":\"right\"},attrs:{\"total\":_vm.total,\"current-page\":_vm.page,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next, jumper\"},on:{\"current-change\":_vm.currentChange}}),_c('el-dialog',{attrs:{\"visible\":_vm.deleteDialogOpen,\"title\":\"删除引擎\",\"width\":\"25%\"},on:{\"update:visible\":function($event){_vm.deleteDialogOpen=$event}}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',{staticStyle:{\"color\":\"#959fb4\"}},[_vm._v(\"引擎删除后，相关的数据将一并删除，不可恢复\")]),_c('p',{staticStyle:{\"color\":\"#959fb4\",\"margin-top\":\"14px\"}},[_vm._v(\"请确认是否删除？\")])]),_c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"confirmDel\",on:{\"click\":_vm.agentDelete}},[_vm._v(\" 确认删除 \")]),_c('el-button',{staticClass:\"cancelDel\",on:{\"click\":function($event){_vm.deleteDialogOpen = false}}},[_vm._v(\" 取消 \")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport VueBase from '@/VueBase'\nimport { Component } from 'vue-property-decorator'\nimport { AgentListObj } from '@/views/setting/types'\nimport { formatTimestamp } from '@/utils/utils'\n\n@Component({\n  name: 'AgentManage',\n  filters: {\n    formatTimestamp(date: number | any) {\n      return formatTimestamp(date)\n    },\n  },\n})\nexport default class AgentManage extends VueBase {\n  private tableData: Array<AgentListObj> = []\n  private total = 0\n  private page = 1\n  private pageSize = 10\n  private currentPageSize = 0\n  private currentPageDelete = 0\n  private deleteDialogOpen = false\n  private deleteSelectId = 0\n\n  created() {\n    this.getTableData()\n  }\n\n  private currentChange(val: number | string) {\n    this.page = parseInt(`${val}`)\n    this.getTableData()\n  }\n\n  private async getTableData() {\n    const params = {\n      page: this.page,\n      pageSize: this.pageSize,\n    }\n    this.loadingStart()\n    const { status, msg, data, page } = await this.services.setting.agentList(\n      params\n    )\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    this.tableData = data\n    this.currentPageSize = data.length\n    this.total = page.alltotal\n    this.currentPageDelete = 0\n    console.log(this.currentPageSize)\n  }\n\n  private async agentInstall(id: string | number) {\n    this.loadingStart()\n    const { status, msg } = await this.services.setting.agentInstall({\n      id: parseInt(`${id}`),\n    })\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    await this.getTableData()\n  }\n\n  private async agentUninstall(id: string | number) {\n    this.loadingStart()\n    const { status, msg } = await this.services.setting.agentUninstall({\n      id: parseInt(`${id}`),\n    })\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    await this.getTableData()\n  }\n\n  private async doDelete(id: string | number) {\n    this.deleteDialogOpen = true\n    this.deleteSelectId = parseInt(`${id}`)\n  }\n\n  private async agentDelete() {\n    this.deleteDialogOpen = false\n    this.loadingStart()\n    const { status, msg } = await this.services.setting.agentDelete({\n      id: this.deleteSelectId,\n    })\n    this.loadingDone()\n    if (status !== 201) {\n      this.$message.error(msg)\n      return\n    }\n    this.currentPageDelete = this.currentPageDelete + 1\n    if (this.currentPageDelete === this.currentPageSize) {\n      this.page = this.page - 1\n    }\n    await this.getTableData()\n    this.deleteSelectId = 0\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentManage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentManage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AgentManage.vue?vue&type=template&id=739b2802&scoped=true&\"\nimport script from \"./AgentManage.vue?vue&type=script&lang=ts&\"\nexport * from \"./AgentManage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AgentManage.vue?vue&type=style&index=0&id=739b2802&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"739b2802\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentManage.vue?vue&type=style&index=0&id=739b2802&scoped=true&lang=scss&\""],"sourceRoot":""}