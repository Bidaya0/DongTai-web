(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4006b516"],{"0e71":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-warp"},[a("el-table",{staticClass:"agentManageTable",attrs:{data:t.tableData,"header-align":"center"}},[a("el-table-column",{attrs:{label:t.$t("views.agentManage.projectName"),prop:"project_name",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"dot"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.project_name,placement:"top-start"}},[a("span",[t._v(t._s(n.project_name))])])],1)]}}])}),a("el-table-column",{attrs:{label:t.$t("views.agentManage.address"),prop:"server",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"dot"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.server,placement:"top-start"}},[a("span",[t._v(t._s(n.server))])])],1)]}}])}),a("el-table-column",{attrs:{width:"400",label:t.$t("views.agentManage.payload"),prop:"system_load"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"dot"},[t._v(" "+t._s(n.system_load)+" ")])]}}])}),a("el-table-column",{attrs:{label:t.$t("views.agentManage.status"),prop:"running_status",width:"90px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",[t._v(" "+t._s(n.running_status)+" ")])]}}])}),a("el-table-column",{attrs:{width:"160px",label:t.$t("views.agentManage.timestapm")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatTimestamp")(e.row.latest_time))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$t("views.agentManage.owner"),prop:"owner",width:"120px"}}),a("el-table-column",{attrs:{label:t.$t("views.agentManage.manage"),width:"140px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"icon-box"},["未运行"==n.running_status?a("i",{staticClass:"icon el-icon-video-play",on:{click:function(e){return t.agentInstall(n.id)}}}):a("i",{staticClass:"icon el-icon-video-pause",on:{click:function(e){return t.agentUninstall(n.id)}}}),a("i",{staticClass:"icon el-icon-delete",on:{click:function(e){return t.doDelete(n.id)}}})])]}}])}),a("el-table-column",{attrs:{label:"Agent",width:"320",prop:"token"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"dot"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.token,placement:"top-start"}},[a("span",[t._v(t._s(n.token))])])],1)]}}])})],1),a("el-pagination",{staticStyle:{float:"right"},attrs:{total:t.total,"current-page":t.page,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.currentChange}}),a("el-dialog",{attrs:{visible:t.deleteDialogOpen,title:"删除引擎",width:"25%"},on:{"update:visible":function(e){t.deleteDialogOpen=e}}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticStyle:{color:"#959fb4"}},[t._v("引擎删除后，相关的数据将一并删除，不可恢复")]),a("p",{staticStyle:{color:"#959fb4","margin-top":"14px"}},[t._v("请确认是否删除？")])]),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"confirmDel",on:{click:t.agentDelete}},[t._v(" 确认删除 ")]),a("el-button",{staticClass:"cancelDel",on:{click:function(e){t.deleteDialogOpen=!1}}},[t._v(" 取消 ")])],1)])],1)},r=[],s=a("60b5"),i=a("303e"),l=a("acf6"),c=a("e378"),o=a("a8e5"),u=(a("6a61"),a("21c9")),p=a("8c73"),g=a("e4a1"),d=a("73ec"),h=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.tableData=[],t.total=0,t.page=1,t.pageSize=10,t.currentPageSize=0,t.currentPageDelete=0,t.deleteDialogOpen=!1,t.deleteSelectId=0,t}return Object(l["a"])(a,[{key:"created",value:function(){this.getTableData()}},{key:"currentChange",value:function(t){this.page=parseInt("".concat(t)),this.getTableData()}},{key:"getTableData",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={page:this.page,pageSize:this.pageSize},this.loadingStart(),t.next=4,this.services.setting.agentList(e);case 4:if(a=t.sent,n=a.status,r=a.msg,s=a.data,i=a.page,this.loadingDone(),201===n){t.next=13;break}return this.$message.error(r),t.abrupt("return");case 13:this.tableData=s,this.currentPageSize=s.length,this.total=i.alltotal,this.currentPageDelete=0,console.log(this.currentPageSize);case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"agentInstall",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadingStart(),t.next=3,this.services.setting.agentInstall({id:parseInt("".concat(e))});case 3:if(a=t.sent,n=a.status,r=a.msg,this.loadingDone(),201===n){t.next=10;break}return this.$message.error(r),t.abrupt("return");case 10:return t.next=12,this.getTableData();case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"agentUninstall",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadingStart(),t.next=3,this.services.setting.agentUninstall({id:parseInt("".concat(e))});case 3:if(a=t.sent,n=a.status,r=a.msg,this.loadingDone(),201===n){t.next=10;break}return this.$message.error(r),t.abrupt("return");case 10:return t.next=12,this.getTableData();case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"doDelete",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.deleteDialogOpen=!0,this.deleteSelectId=parseInt("".concat(e));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"agentDelete",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.deleteDialogOpen=!1,this.loadingStart(),t.next=4,this.services.setting.agentDelete({id:this.deleteSelectId});case 4:if(e=t.sent,a=e.status,n=e.msg,this.loadingDone(),201===a){t.next=11;break}return this.$message.error(n),t.abrupt("return");case 11:return this.currentPageDelete=this.currentPageDelete+1,this.currentPageDelete===this.currentPageSize&&(this.page=this.page-1),t.next=15,this.getTableData();case 15:this.deleteSelectId=0;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(p["a"]);h=Object(u["c"])([Object(g["a"])({name:"AgentManage",filters:{formatTimestamp:function(t){return Object(d["b"])(t)}}})],h);var f=h,v=f,b=(a("b984"),a("5d22")),m=Object(b["a"])(v,n,r,!1,null,"739b2802",null);e["default"]=m.exports},"266a":function(t,e,a){},b984:function(t,e,a){"use strict";a("266a")}}]);
//# sourceMappingURL=chunk-4006b516.3e2a1d19.js.map